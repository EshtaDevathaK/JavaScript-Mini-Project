<!DOCTYPE html>
<html>
<head>
  <title>Debounce Live Search</title>
</head>
<body>
  <h2>🔍 Live Search with Debounce</h2>

  <input type="text" id="searchInput" placeholder="Type to search..." />
  <div id="searcher" style="display:none;">Searching...</div>
  <div id="result"></div>

  <script>
    // 1️⃣ Debounce function
    // Wait until the user stops typing for 500ms, THEN go to the search.
    function debounce(func, delay) { // ----> 1 Start of debounce function
      let timeoutId; // timerID stored in this specific place
      return function (...args) { // Inner function where args and this are used
        clearTimeout(timeoutId); // Cancel previous timeout if typing continues
        timeoutId = setTimeout(() => { 
          func.apply(this, args);  // Call the search function after 500ms
        }, delay);
      };
    }

    // 2️⃣ Simulate API Search function
    // This is the simulated API search that will show a "Searching..." message.
    function fakeSearchAPI(query) { // ----> 2 This is the function that gets called
      const searcher = document.getElementById("searcher");
      const result = document.getElementById("result");

      searcher.style.display = "block"; // Show "Searching..."
      result.textContent = ""; // Clear any old results

      setTimeout(() => { // This simulates the delay in an API response
        searcher.style.display = "none"; // Hide searcher after 1 second
        result.textContent = `🔎 Results for "${query}"`; // Display result with the search query
      }, 1000); // 1-second delay to simulate real API response time
    }

    // 3️⃣ Attach the debounce search to the input field
    const input = document.getElementById("searchInput");
    
    const debouncedSearch = debounce(function () { // ----> 1
      const query = input.value.trim();  // Get the value typed in the input field
      if (query) { // If the query is not empty, run the fake search API
        fakeSearchAPI(query); // ----> 2 This is the function called when there is a valid query
      }
    }, 500); // 500ms delay before calling the fake search API

    // 4️⃣ Add event listener to the input field to listen for typing
    input.addEventListener("input", debouncedSearch); // ----> 3 This connects everything to the input field
  
  </script>
</body>
</html>



<!-- 
🧠 What is the Problem?
Imagine you're typing into a search box:
You type H, then He, then Hel, then Hell, then Hello — very fast!

If we call the search function every time you press a key, then:

We end up calling the API 5 times!

That's too much work for the browser or server.

And it wastes resources, makes the app slow.

So... we need a way to wait until the user pauses typing for a moment before calling the API. -->



<!-- if (query) fakeSearchAPI(query);  // Only search if not empty :
 🧠 What's happening here?
1️⃣ if (query)
This is a condition.

It checks: “Is query a non-empty string?”

If you typed something like "dog" → this is true.

If you typed nothing or only spaces ("") → this is false.

👉 So this makes sure we don’t call the fake search if the input is empty.

2️⃣ fakeSearchAPI(query)
If the if condition is true, then this part runs.

It calls our function fakeSearchAPI and gives it the current word the user typed.



--> 



<!--


✅ What happens if you use just setTimeout() directly on every input event?
Every time the user types a letter (like "H", "He", "Hel"...), it will set a new timer, but without cancelling the old one. That means:

All timers will eventually fire.

Result: Multiple API calls for each keypress — the problem you’re trying to avoid. -->



<!-- Inside apply:

this → refers to the input element (where you typed “D”).
without this -> it  the DOM context may get Lost 

args → contains the input event (e.g., [event]).

func = the original function passed into debounce → function () { const query = input.value.trim(); ... }

The input element :
is the HTML tag <input> where the user types text, and 

the input event :
 is triggered every time the user types or modifies the text in that field.
the input event is triggered every time you type or delete a character, such as when the input changes from:

nothing → "D"

"D" → "De"

"De" → "Dev"

"Dev" → "Deva" 


-->

